flowchart LR
    subgraph "Data Ingestion"
        A["ğŸŒ¡ï¸ Sensor Data<br/>(JSON)"] --> B["ğŸ“¨ Pub/Sub Topic"]
        B --> C["âš¡ Cloud Function<br/>(Real-time Processing)"]
    end
    
    subgraph "Data Storage"
        C --> D["ğŸ¢ BigQuery Raw Table<br/>(Partitioned by Date)"]
        D --> E["ğŸ“Š Staging Layer<br/>(Data Cleaning)"]
        E --> F["ğŸ“ˆ Marts Layer<br/>(Business Logic)"]
    end
    
    subgraph "Data Consumption"
        F --> G["ğŸ“± Streamlit Dashboard"]
        F --> H["ğŸ“Š Analytics Queries"]
        F --> I["ğŸš¨ Anomaly Detection"]
    end
    
    subgraph "Orchestration"
        J["â° Cloud Scheduler"] --> K["ğŸ”„ Cloud Workflows"]
        K --> C
        K --> L["ğŸ”„ dbt Transformations"]
        L --> E
    end
    
    style A fill:#ffebee
    style B fill:#fff3e0
    style C fill:#e8f5e8
    style D fill:#e3f2fd
    style E fill:#f3e5f5
    style F fill:#fff8e1
    style G fill:#e1f5fe
    style H fill:#e1f5fe
    style I fill:#ffebee





