flowchart LR
    subgraph "Data Ingestion"
        A["🌡️ Sensor Data<br/>(JSON)"] --> B["📨 Pub/Sub Topic"]
        B --> C["⚡ Cloud Function<br/>(Real-time Processing)"]
    end
    
    subgraph "Data Storage"
        C --> D["🏢 BigQuery Raw Table<br/>(Partitioned by Date)"]
        D --> E["📊 Staging Layer<br/>(Data Cleaning)"]
        E --> F["📈 Marts Layer<br/>(Business Logic)"]
    end
    
    subgraph "Data Consumption"
        F --> G["📱 Streamlit Dashboard"]
        F --> H["📊 Analytics Queries"]
        F --> I["🚨 Anomaly Detection"]
    end
    
    subgraph "Orchestration"
        J["⏰ Cloud Scheduler"] --> K["🔄 Cloud Workflows"]
        K --> C
        K --> L["🔄 dbt Transformations"]
        L --> E
    end
    
    style A fill:#ffebee
    style B fill:#fff3e0
    style C fill:#e8f5e8
    style D fill:#e3f2fd
    style E fill:#f3e5f5
    style F fill:#fff8e1
    style G fill:#e1f5fe
    style H fill:#e1f5fe
    style I fill:#ffebee





